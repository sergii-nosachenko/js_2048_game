parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"Tp2M":[function(require,module,exports) {
"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}var i=function(){function t(n,i){e(this,t),this._element=n,this._value=i||0}return n(t,[{key:"value",get:function(){return this._value},set:function(e){this._value=e,this._element.innerText=e||"",this._element.className=this._element.className.replace(/( ?field__cell--\d+)/,""),this._element.classList.add("field__cell--".concat(e)),this.state=""}},{key:"state",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this._element.offsetWidth,this._element.dataset.state=e}}]),t}();module.exports=i;
},{}],"Tszg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.settings=void 0,exports.settings={debug:!1,gravity:800,zIndex:99999,respectReducedMotion:!0};
},{}],"NgkW":[function(require,module,exports) {
"use strict";function e(e,r){return Object.assign({},e,r)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.overrideDefaults=void 0,exports.overrideDefaults=e;
},{}],"iwjM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Circle=void 0;var e=function(){function e(e,r,t){void 0===t&&(t=0),this.x=e,this.y=r,this.radius=t}return e.zero=new e(0,0),e}();exports.Circle=e;
},{}],"xYA8":[function(require,module,exports) {
"use strict";function e(e,r,t){return(1-t)*e+t*r}function r(r,t,p){return e(r,t,(1-Math.cos(p*Math.PI))/2)}function t(e,r,t){return(t-e)/(r-e)}function p(e,r,t){return Math.min(t,Math.max(r,e))}function o(e,r){return Math.abs(e-r)<exports.epsilon}Object.defineProperty(exports,"__esModule",{value:!0}),exports.approximately=exports.clamp=exports.invlerp=exports.slerp=exports.lerp=exports.epsilon=exports.rad2deg=exports.deg2rad=void 0,exports.deg2rad=Math.PI/180,exports.rad2deg=180/Math.PI,exports.epsilon=1e-6,exports.lerp=e,exports.slerp=r,exports.invlerp=t,exports.clamp=p,exports.approximately=o;
},{}],"j7bV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Color=void 0;var t=require("../systems/math"),e=function(){function e(t,e,r){this.values=new Float32Array(3),this.rgb=[t,e,r]}return Object.defineProperty(e.prototype,"r",{get:function(){return this.values[0]},set:function(t){this.values[0]=Math.floor(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"g",{get:function(){return this.values[1]},set:function(t){this.values[1]=Math.floor(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"b",{get:function(){return this.values[2]},set:function(t){this.values[2]=Math.floor(t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rgb",{get:function(){return[this.r,this.g,this.b]},set:function(t){this.r=t[0],this.g=t[1],this.b=t[2]},enumerable:!1,configurable:!0}),e.prototype.mix=function(r,n){return void 0===n&&(n=.5),new e(t.lerp(this.r,r.r,n),t.lerp(this.g,r.g,n),t.lerp(this.b,r.b,n))},e.prototype.toHex=function(){var t=function(t){return t.toString(16).padStart(2,"0")};return"#"+t(this.r)+t(this.g)+t(this.b)},e.prototype.toString=function(){return"rgb("+this.values.join(", ")+")"},e.fromHex=function(t){return t.startsWith("#")&&(t=t.substr(1)),new e(parseInt(t.substr(0,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(4,2),16))},e.fromHsl=function(t,r,n){if(t/=360,n/=100,0===(r/=100))return new e(n,n,n);var o=function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+6*(e-t)*r:r<.5?e:r<2/3?t+(e-t)*(2/3-r)*6:t},i=function(t){return Math.min(255,256*t)},s=n<.5?n*(1+r):n+r-n*r,u=2*n-s;return new e(i(o(u,s,t+1/3)),i(o(u,s,t)),i(o(u,s,t-1/3)))},e.white=new e(255,255,255),e.black=new e(0,0,0),e}();exports.Color=e;
},{"../systems/math":"xYA8"}],"BAYj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Spline=void 0;var e=require("../systems/math"),t=function(){function t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)throw new Error("Splines require at least one key.");if(Array.isArray(e[0]))throw new Error("You are trying to pass an array to the spline constructor, which is not supported. Try to spread the array into the constructor instead.");this.keys=e}return t.prototype.evaluate=function(t){if(0===this.keys.length)throw new Error("Attempt to evaluate a spline with no keys.");if(1===this.keys.length)return this.keys[0].value;var r=this.keys.sort(function(e,t){return e.time-t.time}),n=r.findIndex(function(e){return e.time>t});if(0===n)return r[0].value;if(-1===n)return r[r.length-1].value;var i=r[n-1],o=r[n],s=e.invlerp(i.time,o.time,t);return this.interpolate(i.value,o.value,s)},t}();exports.Spline=t;
},{"../systems/math":"xYA8"}],"bC9f":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(n,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])})(n,r)};return function(n,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function e(){this.constructor=n}t(n,r),n.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}}(),n=this&&this.__spreadArray||function(t,n){for(var r=0,e=n.length,o=t.length;r<e;r++,o++)t[o]=n[r];return t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Gradient=void 0;var r=require("./spline"),e=function(r){function e(){return null!==r&&r.apply(this,arguments)||this}return t(e,r),e.prototype.interpolate=function(t,n,r){return t.mix(n,r)},e.solid=function(t){return new e({value:t,time:.5})},e.simple=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var o=1/(t.length-1);return new(e.bind.apply(e,n([void 0],t.map(function(t,n){return{value:t,time:n*o}}))))},e}(r.Spline);exports.Gradient=e;
},{"./spline":"BAYj"}],"YpSo":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])})(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0}),exports.NumericSpline=void 0;var e=require("../systems/math"),r=require("./spline"),n=function(r){function n(){return null!==r&&r.apply(this,arguments)||this}return t(n,r),n.prototype.interpolate=function(t,r,n){return e.slerp(t,r,n)},n}(r.Spline);exports.NumericSpline=n;
},{"../systems/math":"xYA8","./spline":"BAYj"}],"UAm5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Rect=void 0;var e=function(){function e(e,n,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this.x=e,this.y=n,this.width=t,this.height=i}return e.fromScreen=function(){return new e(window.scrollX,window.scrollY,window.innerWidth,window.innerHeight)},e.fromElement=function(n){var t=n.getBoundingClientRect();return new e(window.scrollX+t.x,window.scrollY+t.y,t.width,t.height)},e.zero=new e(0,0),e}();exports.Rect=e;
},{}],"ZEpM":[function(require,module,exports) {
"use strict";var t=this&&this.__spreadArray||function(t,e){for(var n=0,i=e.length,r=t.length;n<i;n++,r++)t[r]=e[n];return t};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vector=void 0;var e=require("../systems/math"),n=function(){function n(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.values=new Float32Array(3),this.xyz=[t,e,n]}return Object.defineProperty(n.prototype,"x",{get:function(){return this.values[0]},set:function(t){this.values[0]=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"y",{get:function(){return this.values[1]},set:function(t){this.values[1]=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"z",{get:function(){return this.values[2]},set:function(t){this.values[2]=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"xyz",{get:function(){return[this.x,this.y,this.z]},set:function(t){this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2]},enumerable:!1,configurable:!0}),n.prototype.magnitude=function(){return Math.sqrt(this.sqrMagnitude())},n.prototype.sqrMagnitude=function(){return this.x*this.x+this.y*this.y+this.z*this.z},n.prototype.add=function(t){return new n(this.x+t.x,this.y+t.y,this.z+t.z)},n.prototype.subtract=function(t){return new n(this.x-t.x,this.y-t.y,this.z-t.z)},n.prototype.scale=function(t){return"number"==typeof t?new n(this.x*t,this.y*t,this.z*t):new n(this.x*t.x,this.y*t.y,this.z*t.z)},n.prototype.normalized=function(){var e=this.magnitude();return 0!==e?this.scale(1/e):new(n.bind.apply(n,t([void 0],this.xyz)))},n.prototype.angle=function(t){return e.rad2deg*Math.acos((this.x*t.x+this.y*t.y+this.z*t.z)/(this.magnitude()*t.magnitude()))},n.prototype.cross=function(t){return new n(this.y*t.z-this.z*t.y,this.z*t.x-this.x*t.z,this.x*t.y-this.y*t.x)},n.prototype.dot=function(t){return this.magnitude()*t.magnitude()*Math.cos(e.deg2rad*this.angle(t))},n.prototype.toString=function(){return"Vector("+this.values.join(", ")+")"},n.from2dAngle=function(t){return new n(Math.cos(t*e.deg2rad),Math.sin(t*e.deg2rad))},n.zero=new n(0,0,0),n.one=new n(1,1,1),n.right=new n(1,0,0),n.up=new n(0,1,0),n.forward=new n(0,0,1),n}();exports.Vector=n;
},{"../systems/math":"xYA8"}],"j4tr":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,r,t,i){void 0===i&&(i=t),Object.defineProperty(e,i,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,i){void 0===i&&(i=t),e[i]=r[t]}),r=this&&this.__exportStar||function(r,t){for(var i in r)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||e(t,r,i)};Object.defineProperty(exports,"__esModule",{value:!0}),r(require("./circle"),exports),r(require("./color"),exports),r(require("./gradient"),exports),r(require("./numericSpline"),exports),r(require("./rect"),exports),r(require("./vector"),exports);
},{"./circle":"iwjM","./color":"j7bV","./gradient":"bC9f","./numericSpline":"YpSo","./rect":"UAm5","./vector":"ZEpM"}],"oCEN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.rotationToNormal=void 0;var e=require("../components"),r=require("../systems/math");function o(o){var t=o.x*r.deg2rad,s=o.y*r.deg2rad,a=new e.Vector(Math.cos(s),0,Math.sin(s)),n=new e.Vector(0,Math.cos(t),Math.sin(t));return a.cross(n)}exports.rotationToNormal=o;
},{"../components":"j4tr","../systems/math":"xYA8"}],"GWAO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.despawningRules=void 0,exports.despawningRules={lifetime:function(e){return e.lifetime<=0},bounds:function(e){var t=document.documentElement.scrollHeight;return e.location.y>t}};
},{}],"UK9c":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Lazy=void 0;var t=function(){function t(e,i){void 0===i&&(i=t.defaultExists),this.factory=e,this.exists=i}return Object.defineProperty(t.prototype,"current",{get:function(){return this.exists(this.value)||(this.value=this.factory()),this.value},enumerable:!1,configurable:!0}),t.defaultExists=function(t){return void 0!==t},t}();exports.Lazy=t;
},{}],"CXlP":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,r,t,i){void 0===i&&(i=t),Object.defineProperty(e,i,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,i){void 0===i&&(i=t),e[i]=r[t]}),r=this&&this.__exportStar||function(r,t){for(var i in r)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||e(t,r,i)};Object.defineProperty(exports,"__esModule",{value:!0}),r(require("./config"),exports),r(require("./rotation"),exports),r(require("./rules"),exports),r(require("./lazy"),exports);
},{"./config":"NgkW","./rotation":"oCEN","./rules":"GWAO","./lazy":"UK9c"}],"I4Cf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.particleContainer=exports.debugContainer=exports.rootContainer=void 0;var e=require("./settings"),t=require("./util"),n="party-js-";function r(e){return e&&e.isConnected}function o(e,t,r){var o=document.createElement("div");return o.id=n+e,Object.assign(o.style,t),r.appendChild(o)}exports.rootContainer=new t.Lazy(function(){return o("container",{position:"fixed",left:"0",top:"0",height:"100vh",width:"100vw",pointerEvents:"none",userSelect:"none",zIndex:e.settings.zIndex.toString()},document.body)},r),exports.debugContainer=new t.Lazy(function(){return o("debug",{position:"absolute",top:"0",left:"0",margin:"0.5em",padding:"0.5em 1em",border:"2px solid rgb(0, 0, 0, 0.2)",background:"rgb(0, 0, 0, 0.1)",color:"#555",fontFamily:"monospace"},exports.rootContainer.current)},r),exports.particleContainer=new t.Lazy(function(){return o("particles",{width:"100%",height:"100%",overflow:"hidden",perspective:"1200px"},exports.rootContainer.current)},r);
},{"./settings":"Tszg","./util":"CXlP"}],"G20O":[function(require,module,exports) {
"use strict";var e=this&&this.__spreadArray||function(e,t){for(var r=0,i=t.length,s=e.length;r<i;r++,s++)e[s]=t[r];return e};Object.defineProperty(exports,"__esModule",{value:!0}),exports.Debug=void 0;var t=require("./containers"),r=require("./settings"),i=function(){function i(e){this.scene=e,this.refreshRate=8,this.refreshTimer=1/this.refreshRate}return i.prototype.tick=function(e){var i=t.debugContainer.current,s=r.settings.debug?"block":"none";i.style.display!==s&&(i.style.display=s),r.settings.debug&&(this.refreshTimer+=e,this.refreshTimer>1/this.refreshRate&&(this.refreshTimer=0,i.innerHTML=this.getDebugInformation(e).join("<br>")))},i.prototype.getDebugInformation=function(t){var r=this.scene.emitters.length,i=this.scene.emitters.reduce(function(e,t){return e+t.particles.length},0),s=["<b>party.js Debug</b>","--------------","FPS: "+Math.round(1/t),"Emitters: "+r,"Particles: "+i],n=this.scene.emitters.map(function(e){return["⭯: "+(e.currentLoop+1)+"/"+(e.options.loops>=0?e.options.loops:"∞"),"Σp: "+e.particles.length,e.isExpired?"<i>expired</i>":"Σt: "+e.durationTimer.toFixed(3)+"s"].join(", ")});return s.push.apply(s,e(["--------------"],n)),s},i}();exports.Debug=i;
},{"./containers":"I4Cf","./settings":"Tszg"}],"ouuR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.randomInsideCircle=exports.randomInsideRect=exports.randomUnitVector=exports.pick=exports.randomRange=void 0;var r=require("../components"),t=require("./math");function e(r,e){return void 0===r&&(r=0),void 0===e&&(e=1),t.lerp(r,e,Math.random())}function n(r){return 0===r.length?void 0:r[Math.floor(Math.random()*r.length)]}function o(){var t=e(0,2*Math.PI),n=e(-1,1);return new r.Vector(Math.sqrt(1-n*n)*Math.cos(t),Math.sqrt(1-n*n)*Math.sin(t),n)}function a(t){return new r.Vector(t.x+e(0,t.width),t.y+e(0,t.height))}function i(t){var n=e(0,2*Math.PI),o=e(0,t.radius);return new r.Vector(t.x+Math.cos(n)*o,t.y+Math.sin(n)*o)}exports.randomRange=e,exports.pick=n,exports.randomUnitVector=o,exports.randomInsideRect=a,exports.randomInsideCircle=i;
},{"../components":"j4tr","./math":"xYA8"}],"qZKR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.gradientSample=exports.splineSample=exports.skewRelative=exports.skew=exports.range=exports.evaluateVariation=void 0;var e=require("./random");function r(r){return Array.isArray(r)?e.pick(r):"function"==typeof r?r():r}function n(r,n){return function(){return e.randomRange(r,n)}}function t(r,n){return function(){return r+e.randomRange(-n,n)}}function o(r,n){return function(){return r*(1+e.randomRange(-n,n))}}function a(e){return function(){return e.evaluate(Math.random())}}function u(e){return a(e)}exports.evaluateVariation=r,exports.range=n,exports.skew=t,exports.skewRelative=o,exports.splineSample=a,exports.gradientSample=u;
},{"./random":"ouuR"}],"p79b":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDefaultEmitterOptions=void 0;var e=require("../../util/rules");function t(){return{duration:5,loops:1,useGravity:!0,maxParticles:300,despawningRules:[e.despawningRules.lifetime,e.despawningRules.bounds],modules:[]}}exports.getDefaultEmitterOptions=t;
},{"../../util/rules":"GWAO"}],"HP0e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.circleSource=exports.rectSource=exports.mouseSource=exports.elementSource=exports.dynamicSource=void 0;var e=require("../components"),r=require("./random");function n(r){if(r instanceof HTMLElement)return t(r);if(r instanceof e.Circle)return u(r);if(r instanceof e.Rect)return c(r);if(r instanceof MouseEvent)return o(r);throw new Error("Cannot infer the source type of '"+r+"'.")}function t(n){return function(){return r.randomInsideRect(e.Rect.fromElement(n))}}function o(r){return function(){return new e.Vector(window.scrollX+r.clientX,window.scrollY+r.clientY)}}function c(e){return function(){return r.randomInsideRect(e)}}function u(e){return function(){return r.randomInsideCircle(e)}}exports.dynamicSource=n,exports.elementSource=t,exports.mouseSource=o,exports.rectSource=c,exports.circleSource=u;
},{"../components":"j4tr","./random":"ouuR"}],"KI5r":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDefaultEmissionOptions=void 0;var e=require("../../components"),i=require("../../systems/sources");function t(){return{rate:10,angle:0,bursts:[],sourceSampler:i.rectSource(e.Rect.zero),initialLifetime:5,initialSpeed:5,initialSize:1,initialRotation:e.Vector.zero,initialColor:e.Color.white}}exports.getDefaultEmissionOptions=t;
},{"../../components":"j4tr","../../systems/sources":"HP0e"}],"KG6p":[function(require,module,exports) {
"use strict";function t(){return{shapeFactory:"square",applyColor:e,applyOpacity:o,applyLighting:a,applyTransform:r}}function e(t,e){var o=t.toHex();switch(e.nodeName.toLowerCase()){case"div":e.style.background=o;break;case"svg":e.style.fill=e.style.color=o;break;default:e.style.color=o}}function o(t,e){e.style.opacity=t.toString()}function a(t,e){e.style.filter="brightness("+(.5+Math.abs(t))+")"}function r(t,e){e.style.transform="translateX("+(t.location.x-window.scrollX).toFixed(3)+"px) translateY("+(t.location.y-window.scrollY).toFixed(3)+"px) translateZ("+t.location.z.toFixed(3)+"px) rotateX("+t.rotation.x.toFixed(3)+"deg) rotateY("+t.rotation.y.toFixed(3)+"deg) rotateZ("+t.rotation.z.toFixed(3)+"deg) scale("+t.size.toFixed(3)+")"}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDefaultRendererOptions=void 0,exports.getDefaultRendererOptions=t;
},{}],"W0md":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),t=this&&this.__exportStar||function(t,r){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(r,i)||e(r,t,i)};Object.defineProperty(exports,"__esModule",{value:!0}),t(require("./emitterOptions"),exports),t(require("./emissionOptions"),exports),t(require("./renderOptions"),exports);
},{"./emitterOptions":"p79b","./emissionOptions":"KI5r","./renderOptions":"KG6p"}],"B3L4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Particle=void 0;var i=require("../components"),t=require("../util/config"),o=function(){return function(o){var e=t.overrideDefaults({lifetime:0,size:1,location:i.Vector.zero,rotation:i.Vector.zero,velocity:i.Vector.zero,color:i.Color.white,opacity:1},o);this.id=Symbol(),this.size=this.initialSize=e.size,this.lifetime=this.initialLifetime=e.lifetime,this.rotation=this.initialRotation=e.rotation,this.location=e.location,this.velocity=e.velocity,this.color=e.color,this.opacity=e.opacity}}();exports.Particle=o;
},{"../components":"j4tr","../util/config":"NgkW"}],"Q80F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Emitter=void 0;var i=require("../components/vector"),t=require("../settings"),e=require("../systems/variation"),s=require("../util/config"),r=require("./options"),o=require("./particle"),n=function(){function n(i){this.particles=[],this.currentLoop=0,this.durationTimer=0,this.emissionTimer=0,this.attemptedBurstIndices=[],this.options=s.overrideDefaults(r.getDefaultEmitterOptions(),null==i?void 0:i.emitterOptions),this.emission=s.overrideDefaults(r.getDefaultEmissionOptions(),null==i?void 0:i.emissionOptions),this.renderer=s.overrideDefaults(r.getDefaultRendererOptions(),null==i?void 0:i.rendererOptions)}return Object.defineProperty(n.prototype,"isExpired",{get:function(){return this.options.loops>=0&&this.currentLoop>=this.options.loops},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"canRemove",{get:function(){return 0===this.particles.length},enumerable:!1,configurable:!0}),n.prototype.clearParticles=function(){return this.particles.splice(0).length},n.prototype.tick=function(i){if(!this.isExpired&&(this.durationTimer+=i,this.durationTimer>=this.options.duration&&(this.currentLoop++,this.durationTimer=0,this.attemptedBurstIndices=[]),!this.isExpired)){for(var t=0,s=0,r=this.emission.bursts;s<r.length;s++){var o=r[s];if(o.time<=this.durationTimer&&!this.attemptedBurstIndices.includes(t)){for(var n=e.evaluateVariation(o.count),a=0;a<n;a++)this.emitParticle();this.attemptedBurstIndices.push(t)}t++}this.emissionTimer+=i;for(var l=1/this.emission.rate;this.emissionTimer>l;)this.emissionTimer-=l,this.emitParticle()}var u=function(t){var e=c.particles[t];c.tickParticle(e,i),c.options.despawningRules.some(function(i){return i(e)})&&c.particles.splice(t,1)},c=this;for(a=this.particles.length-1;a>=0;a--)u(a)},n.prototype.tickParticle=function(e,s){e.lifetime-=s,this.options.useGravity&&(e.velocity=e.velocity.add(i.Vector.up.scale(t.settings.gravity*s))),e.location=e.location.add(e.velocity.scale(s));for(var r=0,o=this.options.modules;r<o.length;r++){(0,o[r])(e)}},n.prototype.emitParticle=function(){var t=new o.Particle({location:this.emission.sourceSampler(),lifetime:e.evaluateVariation(this.emission.initialLifetime),velocity:i.Vector.from2dAngle(e.evaluateVariation(this.emission.angle)).scale(e.evaluateVariation(this.emission.initialSpeed)),size:e.evaluateVariation(this.emission.initialSize),rotation:e.evaluateVariation(this.emission.initialRotation),color:e.evaluateVariation(this.emission.initialColor)});return this.particles.push(t),this.particles.length>this.options.maxParticles&&this.particles.shift(),t},n}();exports.Emitter=n;
},{"../components/vector":"ZEpM","../settings":"Tszg","../systems/variation":"qZKR","../util/config":"NgkW","./options":"W0md","./particle":"B3L4"}],"laE5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.resolveShapeFactory=exports.resolvableShapes=void 0;var e=require("./variation");function r(r){var t=e.evaluateVariation(r);if("string"==typeof t){var i=exports.resolvableShapes[t];if(!i)throw new Error("Failed to resolve shape key '"+t+"'. Did you forget to add it to the 'resolvableShapes' lookup?");var o=document.createElement("div");return o.innerHTML=i,o.firstElementChild}return t}exports.resolvableShapes={square:'<div style="height: 10px; width: 10px;"></div>',rectangle:'<div style="height: 6px; width: 10px;"></div>',circle:'<svg viewBox="0 0 2 2" width="10" height="10"><circle cx="1" cy="1" r="1" fill="currentColor"/></svg>',roundedSquare:'<div style="height: 10px; width: 10px; border-radius: 3px;"></div>',roundedRectangle:'<div style="height: 6px; width: 10px; border-radius: 3px;"></div>',star:'<svg viewBox="0 0 512 512" width="15" height="15"><polygon fill="currentColor" points="512,197.816 325.961,185.585 255.898,9.569 185.835,185.585 0,197.816 142.534,318.842 95.762,502.431 255.898,401.21 416.035,502.431 369.263,318.842"/></svg>'},exports.resolveShapeFactory=r;
},{"./variation":"qZKR"}],"esBm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Renderer=void 0;var e=require(".."),t=require("../components/vector"),r=require("../containers"),i=require("../systems/shapes"),n=require("../util"),o=function(){function o(){this.elements=new Map,this.light=new t.Vector(0,0,1),this.enabled=!0,this.enabled=!e.settings.respectReducedMotion||!window.matchMedia("(prefers-reduced-motion)").matches}return o.prototype.begin=function(){this.renderedParticles=[]},o.prototype.end=function(){for(var e=this.elements.keys(),t=e.next();!t.done;){var r=t.value;this.renderedParticles.includes(r)||(this.elements.get(r).remove(),this.elements.delete(r)),t=e.next()}return this.renderedParticles.length},o.prototype.renderParticle=function(e,t){if(this.enabled){var r=t.renderer,i=this.elements.has(e.id)?this.elements.get(e.id):this.createParticleElement(e,r);if(r.applyColor&&r.applyColor(e.color,i),r.applyOpacity&&r.applyOpacity(e.opacity,i),r.applyLighting){var o=n.rotationToNormal(e.rotation).dot(this.light);r.applyLighting(o,i)}r.applyTransform&&r.applyTransform(e,i),this.renderedParticles.push(e.id)}},o.prototype.createParticleElement=function(e,t){var n=i.resolveShapeFactory(t.shapeFactory).cloneNode(!0);return n.style.position="absolute",this.elements.set(e.id,r.particleContainer.current.appendChild(n)),n},o}();exports.Renderer=o;
},{"..":"rnaI","../components/vector":"ZEpM","../containers":"I4Cf","../systems/shapes":"laE5","../util":"CXlP"}],"v3hz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scene=void 0;var e=require("./debug"),t=require("./particles/emitter"),r=require("./particles/renderer"),i=function(){function i(){this.emitters=[],this.debug=new e.Debug(this),this.renderer=new r.Renderer,this.scheduledTickId=void 0,this.lastTickTimestamp=performance.now(),this.tick=this.tick.bind(this),this.scheduleTick()}return i.prototype.createEmitter=function(e){var r=new t.Emitter(e);return this.emitters.push(r),r},i.prototype.clearEmitters=function(){return this.emitters.splice(0).length},i.prototype.clearParticles=function(){return this.emitters.reduce(function(e,t){return e+t.clearParticles()},0)},i.prototype.scheduleTick=function(){this.scheduledTickId=window.requestAnimationFrame(this.tick)},i.prototype.cancelTick=function(){window.cancelAnimationFrame(this.scheduledTickId)},i.prototype.tick=function(e){var t=(e-this.lastTickTimestamp)/1e3;try{for(var r=0;r<this.emitters.length;r++){(c=this.emitters[r]).tick(t),c.isExpired&&c.canRemove&&this.emitters.splice(r--,1)}}catch(a){console.error("An error occurred while updating the scene's emitters:\n\""+a+'"')}try{this.renderer.begin();for(var i=0,s=this.emitters;i<s.length;i++)for(var c=s[i],n=0,o=c.particles;n<o.length;n++){var h=o[n];this.renderer.renderParticle(h,c)}this.renderer.end()}catch(a){console.error("An error occurred while rendering the scene's particles:\n\""+a+'"')}this.debug.tick(t),this.lastTickTimestamp=e,this.scheduleTick()},i}();exports.Scene=i;
},{"./debug":"G20O","./particles/emitter":"Q80F","./particles/renderer":"esBm"}],"plmB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModuleBuilder=void 0;var e=require("../components"),i=function(){function e(){this.factor="lifetime",this.isRelative=!1}return e.prototype.drive=function(e){return this.driverKey=e,this},e.prototype.through=function(e){return this.factor=e,this},e.prototype.by=function(e){return this.driverValue=e,this},e.prototype.relative=function(e){return void 0===e&&(e=!0),this.isRelative=e,this},e.prototype.build=function(){var e=this;if(void 0===this.driverKey)throw new Error("No driving key was provided in the module builder. Did you forget a '.drive()' call?");if(void 0===this.driverValue)throw new Error("No driving value was provided in the module builder. Did you forget a '.through()' call?");return function(i){o(i,e.driverKey,t(e.driverValue,r(e.factor,i),i),e.isRelative)}},e}();function t(e,i,t){return"object"==typeof e&&"evaluate"in e?e.evaluate(i):"function"==typeof e?e(i,t):e}function r(e,i){switch(e){case"lifetime":return i.initialLifetime-i.lifetime;case"relativeLifetime":return(i.initialLifetime-i.lifetime)/i.initialLifetime;case"size":return i.size;default:throw new Error("Invalid driving factor '"+e+"'.")}}function o(i,t,r,n){if(void 0===n&&(n=!1),n){var u=i["initial"+t[0].toUpperCase()+t.substr(1)];if(void 0===u)throw new Error("Unable to use relative chaining with key '"+t+"'; no initial value exists.");if(r instanceof e.Vector)o(i,t,u.add(r));else{if("number"!=typeof r)throw new Error("Unable to use relative chaining with particle key '"+t+"'; no relative operation for '"+r+"' could be inferred.");o(i,t,u*r)}}else i[t]=r}exports.ModuleBuilder=i;
},{"../components":"j4tr"}],"EaIq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.confetti=void 0;var e=require("../"),r=require("../components"),i=require("../systems/modules"),t=require("../systems/random"),o=require("../systems/sources"),n=require("../systems/variation"),s=require("../util");function a(a,u){var l=s.overrideDefaults({count:n.range(20,40),spread:n.range(35,45),speed:n.range(300,600),size:n.skew(1,.2),rotation:function(){return t.randomUnitVector().scale(180)},color:function(){return r.Color.fromHsl(t.randomRange(0,360),100,70)},modules:[(new i.ModuleBuilder).drive("size").by(function(e){return Math.min(1,3*e)}).relative().build(),(new i.ModuleBuilder).drive("rotation").by(function(e){return new r.Vector(140,200,260).scale(e)}).relative().build()],shapes:["square","circle"]},u);return e.scene.current.createEmitter({emitterOptions:{loops:1,duration:8,modules:l.modules},emissionOptions:{rate:0,bursts:[{time:0,count:l.count}],sourceSampler:o.dynamicSource(a),angle:n.skew(-90,n.evaluateVariation(l.spread)),initialLifetime:8,initialSpeed:l.speed,initialSize:l.size,initialRotation:l.rotation,initialColor:l.color},rendererOptions:{shapeFactory:l.shapes}})}exports.confetti=a;
},{"../":"rnaI","../components":"j4tr","../systems/modules":"plmB","../systems/random":"ouuR","../systems/sources":"HP0e","../systems/variation":"qZKR","../util":"CXlP"}],"Kxfo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.sparkles=void 0;var e=require(".."),i=require("../components"),r=require("../systems/modules"),t=require("../systems/random"),o=require("../systems/sources"),n=require("../systems/variation"),s=require("../util");function u(u,a){var l=s.overrideDefaults({lifetime:n.range(1,2),count:n.range(10,20),speed:n.range(100,200),size:n.range(.8,1.8),rotation:function(){return new i.Vector(0,0,t.randomRange(0,360))},color:function(){return i.Color.fromHsl(50,100,t.randomRange(55,85))},modules:[(new r.ModuleBuilder).drive("rotation").by(function(e){return new i.Vector(0,0,200).scale(e)}).relative().build(),(new r.ModuleBuilder).drive("size").by(new i.NumericSpline({time:0,value:0},{time:.3,value:1},{time:.7,value:1},{time:1,value:0})).through("relativeLifetime").relative().build(),(new r.ModuleBuilder).drive("opacity").by(new i.NumericSpline({time:0,value:1},{time:.5,value:1},{time:1,value:0})).through("relativeLifetime").build()],shapes:"star"},a);return e.scene.current.createEmitter({emitterOptions:{loops:1,duration:3,useGravity:!1,modules:l.modules},emissionOptions:{rate:0,bursts:[{time:0,count:l.count}],sourceSampler:o.dynamicSource(u),angle:n.range(0,360),initialLifetime:l.lifetime,initialSpeed:l.speed,initialSize:l.size,initialRotation:l.rotation,initialColor:l.color},rendererOptions:{applyLighting:void 0,shapeFactory:l.shapes}})}exports.sparkles=u;
},{"..":"rnaI","../components":"j4tr","../systems/modules":"plmB","../systems/random":"ouuR","../systems/sources":"HP0e","../systems/variation":"qZKR","../util":"CXlP"}],"FoMx":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,t,r,i){void 0===i&&(i=r),Object.defineProperty(e,i,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]}),t=this&&this.__exportStar||function(t,r){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(r,i)||e(r,t,i)};Object.defineProperty(exports,"__esModule",{value:!0}),t(require("./confetti"),exports),t(require("./sparkles"),exports);
},{"./confetti":"EaIq","./sparkles":"Kxfo"}],"rnaI":[function(require,module,exports) {
"use strict";var e=this&&this.__createBinding||(Object.create?function(e,r,t,s){void 0===s&&(s=t),Object.defineProperty(e,s,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,s){void 0===s&&(s=t),e[s]=r[t]}),r=this&&this.__exportStar||function(r,t){for(var s in r)"default"===s||Object.prototype.hasOwnProperty.call(t,s)||e(t,r,s)};Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.forceInit=exports.util=exports.math=exports.random=exports.sources=exports.variation=exports.Emitter=exports.Particle=exports.settings=exports.scene=void 0;var t=require("./scene"),s=require("./util");r(require("./components"),exports),r(require("./templates"),exports),r(require("./systems/shapes"),exports),r(require("./systems/modules"),exports),exports.scene=new s.Lazy(function(){if("undefined"==typeof document||"undefined"==typeof window)throw new Error("It seems like you are trying to run party.js in a non-browser-like environment, which is not supported.");return new t.Scene});var o=require("./settings");Object.defineProperty(exports,"settings",{enumerable:!0,get:function(){return o.settings}});var i=require("./particles/particle");Object.defineProperty(exports,"Particle",{enumerable:!0,get:function(){return i.Particle}});var n=require("./particles/emitter");function u(){exports.scene.current}Object.defineProperty(exports,"Emitter",{enumerable:!0,get:function(){return n.Emitter}}),exports.variation=require("./systems/variation"),exports.sources=require("./systems/sources"),exports.random=require("./systems/random"),exports.math=require("./systems/math"),exports.util=require("./util"),exports.forceInit=u,exports.default=require("./");
},{"./scene":"v3hz","./util":"CXlP","./components":"j4tr","./templates":"FoMx","./systems/shapes":"laE5","./systems/modules":"plmB","./settings":"Tszg","./particles/particle":"B3L4","./particles/emitter":"Q80F","./systems/variation":"qZKR","./systems/sources":"HP0e","./systems/random":"ouuR","./systems/math":"xYA8","./":"rnaI"}],"vabL":[function(require,module,exports) {
"use strict";function e(e){return a(e)||s(e)||i(e)||t()}function t(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function s(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function a(e){if(Array.isArray(e))return n(e)}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=new Array(t);i<t;i++)s[i]=e[i];return s}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function l(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),e}var d=require("./Cell"),h=require("party-js"),c=function(){function t(e,i){r(this,t),this._fieldSize=!i||i<4?4:i>8?8:i,this._container=e||"body",this._isPlaying=!1,this._isActive=!1,this._score=0,this._maxValue=0,this._field=[],this._dom={},window.game2048=window.game2048||{games:[],keyboardHandler:null},window.game2048.games.push(this)}return l(t,null,[{key:"_keyboardHandler",value:function(e){var t=window.game2048&&window.game2048.games.find(function(e){return e.active});if(t)switch(t._isPlaying&&e.preventDefault(),e.code){case"ArrowLeft":case"Numpad4":t.moveLeft();break;case"ArrowRight":case"Numpad6":t.moveRight();break;case"ArrowUp":case"Numpad8":t.moveUp();break;case"ArrowDown":case"Numpad2":t.moveDown();break;case"Enter":case"NumpadEnter":t.start();break;case"KeyR":t.restart();break;case"Tab":var i=window.game2048.games.findIndex(function(e){return e===t});i===window.game2048.games.length-1&&(i=-1),window.game2048.games[i+1]._activateGame()}}},{key:"_deactivateGames",value:function(){window.game2048&&window.game2048.games.forEach(function(e){return e.active=!1})}}]),l(t,[{key:"_initGame",value:function(){this._renderGame(),this._initField(),this._initHandlers(),this._activateGame()}},{key:"_renderGame",value:function(){if(this._container instanceof Element)this._dom.container=this._container;else{if("string"!=typeof this._container)throw new TypeError("Game container must be a DOM Element or string!");this._dom.container=document.querySelector(this._container)}if(!this._dom.container)throw new Error("Game container not found!");this._dom.container.innerHTML='\n      <div class="game">\n        <div class="game__container">\n          <div class="game__header">\n            <h1 class="game__title">2048</h1>\n\n            <div class="game__controls">\n              <div class="game__controls-size">\n                <span\n                  class="game__controls-size-smaller"\n                  '.concat(4===this._fieldSize?"disabled":"",'\n                >-</span>\n\n                <div class="game__controls-size-block">\n                  <span>Size:</span>\n\n                  <span class="game__controls-size-value">\n                    ').concat(this._fieldSize,'\n                  </span>\n                </div>\n\n                <span\n                  class="game__controls-size-bigger"\n                  ').concat(10===this._fieldSize?"disabled":"",'\n                >+</span>\n              </div>\n\n              <p class="game__controls-info">\n                Score: <span class="game-score">0</span>\n              </p>\n\n              <button\n                class="\n                  game__controls-button-start\n                  button start\n                "\n                title = "Press Enter to start the game"\n              >Start</button>\n            </div>\n          </div>\n\n          <table class="game__field field">\n            <tbody>\n              ').concat('\n                  <tr class="field__row">\n                    '.concat('<td class="field__cell"></td>'.repeat(this._fieldSize),"\n                  </tr>\n                ").repeat(this._fieldSize),'\n            </tbody>\n          </table>\n\n          <div class="game__messages">\n            <p class="message message-lose hidden">\n              You lose! Restart the game?\n            </p>\n\n            <p class="message message-win hidden">\n              Winner! Congrats! You did it!\n            </p>\n\n            <p class="message message-start">\n              Press "Start" to begin game. Good luck!\n            </p>\n\n            <p class="message message-hint hidden">\n              Press ← ↑ → ↓ or swipe to move blocks.\n            </p>\n          </div>\n        </div>\n      </div>\n    '),this._dom.game=this._dom.container.querySelector(".game"),this._dom.gameContainer=this._dom.game.querySelector(".game__container"),this._dom.field=this._dom.game.querySelector(".field"),this._dom.score=this._dom.game.querySelector(".game-score"),this._dom.size=this._dom.game.querySelector(".game__controls-size"),this._dom.controls={start:this._dom.game.querySelector(".game__controls-button-start"),smaller:this._dom.game.querySelector(".game__controls-size-smaller"),bigger:this._dom.game.querySelector(".game__controls-size-bigger")},this._dom.rows=this._dom.field.querySelectorAll(".field__row"),this._dom.messages={start:this._dom.game.querySelector(".message-start"),win:this._dom.game.querySelector(".message-win"),lose:this._dom.game.querySelector(".message-lose"),hint:this._dom.game.querySelector(".message-hint")}}},{key:"_initField",value:function(){var t=this;this._field=[],this._dom.field&&e(this._dom.rows).forEach(function(i){var s=[];e(i.querySelectorAll(".field__cell")).forEach(function(e){return s.push(new d(e))}),t._field.push(s)})}},{key:"_clearField",value:function(){this._field.forEach(function(e){e.forEach(function(e){return e.value=0})})}},{key:"_fillField",value:function(e){for(var t=!1,i=0;i<this._fieldSize;i++)for(var s=0;s<this._fieldSize;s++)this._field[i][s].value!==e[i][s].value&&(this._field[i][s].value=e[i][s].value,this._field[i][s].state=e[i][s].isMerged?"merged":"",this.maxValue=e[i][s].value,t=!0);return t}},{key:"_initHandlers",value:function(){var e=this;window.game2048.keyboardHandler||(window.game2048.keyboardHandler=t._keyboardHandler,document.body.addEventListener("keydown",window.game2048.keyboardHandler));var i,s;this._dom.controls.start.addEventListener("click",function(){e._isPlaying?e.restart():e.start()}),this._dom.controls.smaller.addEventListener("click",function(){e._isPlaying||4===e._fieldSize||(e._fieldSize--,e._initGame())}.bind(this)),this._dom.controls.bigger.addEventListener("click",function(){e._isPlaying||10===e._fieldSize||(e._fieldSize++,e._initGame())}.bind(this)),this._dom.gameContainer.addEventListener("click",this._activateGame.bind(this)),this._dom.field.addEventListener("touchstart",function(e){i=e.touches[0].clientX,s=e.touches[0].clientY},!1),this._dom.field.addEventListener("touchmove",function(t){if(i&&s){t.preventDefault();var a=i-t.touches[0].clientX,n=s-t.touches[0].clientY;Math.abs(a)>Math.abs(n)?a>0?e.moveLeft():e.moveRight():n>0?e.moveUp():e.moveDown(),i=null,s=null}},!1)}},{key:"_getRandomInt",value:function(e,t){return Math.floor(Math.random()*t)+e}},{key:"_insertRandomCells",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this._isPlaying)for(var t=1;t<=e;t++){var i=this._getFreeCells(),s=this._getRandomInt(0,i.length),a=Math.random()<.1?4:2;i[s].value=a,i[s].state="new",this.maxValue=a}}},{key:"_getFreeCells",value:function(){return this._field.flat().filter(function(e){return 0===e.value})}},{key:"_activateGame",value:function(){t._deactivateGames(),this.active=!0,this._dom.game.scrollIntoView()}},{key:"_moveCells",value:function(e){if(this._isPlaying){var t=[];switch(e){case"left":for(var i=0;i<this._fieldSize;i++){for(var s=this._field[i],a=[],n=0;n<this._fieldSize;n++){var r=s[n];if(r.value){var o=a.length&&a[a.length-1];!o||o.isMerged||o.value!==r.value?a.push({value:r.value,isMerged:!1}):(o.value+=r.value,o.isMerged=!0,this.score+=o.value)}}var l=a.length;if(l<this._fieldSize)for(var d=1;d<=this._fieldSize-l;d++)a.push({value:0});t.push(a)}break;case"right":for(var h=0;h<this._fieldSize;h++){for(var c=this._field[h],u=[],_=this._fieldSize-1;_>=0;_--){var m=c[_];if(m.value){var f=u.length&&u[0];!f||f.isMerged||f.value!==m.value?u.unshift({value:m.value,isMerged:!1}):(f.value+=m.value,f.isMerged=!0,this.score+=f.value)}}var v=u.length;if(v<this._fieldSize)for(var g=1;g<=this._fieldSize-v;g++)u.unshift({value:0});t.push(u)}break;case"up":for(var y=[],p=0;p<this._fieldSize;p++){for(var S=[],b=0;b<this._fieldSize;b++){var w=this._field[b][p];if(w.value){var k=S.length&&S[S.length-1];!k||k.isMerged||k.value!==w.value?S.push({value:w.value,isMerged:!1}):(k.value+=w.value,k.isMerged=!0,this.score+=k.value)}}var z=S.length;if(z<this._fieldSize)for(var M=1;M<=this._fieldSize-z;M++)S.push({value:0});y.push(S)}for(var C=0;C<this._fieldSize;C++)for(var E=0;E<this._fieldSize;E++)t[E]=t[E]||[],t[E].push(y[C][E]);break;case"down":for(var G=[],L=0;L<this._fieldSize;L++){for(var A=[],P=this._fieldSize-1;P>=0;P--){var q=this._field[P][L];if(q.value){var x=A.length&&A[0];!x||x.isMerged||x.value!==q.value?A.unshift({value:q.value,isMerged:!1}):(x.value+=q.value,x.isMerged=!0,this.score+=x.value)}}var R=A.length;if(R<this._fieldSize)for(var H=1;H<=this._fieldSize-R;H++)A.unshift({value:0});G.push(A)}for(var F=0;F<this._fieldSize;F++)for(var V=0;V<this._fieldSize;V++)t[V]=t[V]||[],t[V].push(G[F][V])}this._fillField(t)&&(this._checkGameWin(),this._insertRandomCells(),this._checkGameLose())}}},{key:"_isNextMovementPossible",value:function(){var e=this;if(this._getFreeCells().length>0)return!0;for(var t=this._field.some(function(t){for(var i=0;i<e._fieldSize-1;i++)if(t[i].value===t[i+1].value)return!0;return!1}),i=!1,s=0;s<this._fieldSize&&!i;s++)for(var a=0;a<this._fieldSize-1;a++)if(this._field[a][s].value===this._field[a+1][s].value){i=!0;break}return t||i}},{key:"_checkGameWin",value:function(){2048===this.maxValue&&this._userHasWon()}},{key:"_checkGameLose",value:function(){this._isNextMovementPossible()||this._userHasLost()}},{key:"_userHasWon",value:function(){this._isPlaying=!1,this._toggleStartControl(),this._hideMessages({start:!0,win:!1,lose:!0,hint:!0}),h.confetti(this._dom.field,{count:h.variation.range(50,100),shapes:["roundedRectangle"]})}},{key:"_userHasLost",value:function(){this._isPlaying=!1,this._toggleStartControl(),this._hideMessages({start:!0,win:!0,lose:!1,hint:!0})}},{key:"_hideMessages",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};for(var t in e)this._dom.messages[t].classList.toggle("hidden",e[t])}},{key:"_toggleStartControl",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._dom.controls.start.classList.remove(e?"restart":"start"),this._dom.controls.start.classList.add(e?"start":"restart"),this._dom.controls.start.innerText=e?"Start":"Reset",this._dom.controls.start.setAttribute("title",e?"Press Enter to start the game":"Press R to reset the game")}},{key:"create",value:function(){this._initGame()}},{key:"start",value:function(){this._clearField(),this._activateGame(),this._toggleStartControl(!1),this._hideMessages({start:!0,win:!0,lose:!0,hint:!1}),this._dom.size.setAttribute("disabled",!0),this._isPlaying=!0,this._insertRandomCells(this._getRandomInt(1,Math.ceil(this._fieldSize/2)))}},{key:"restart",value:function(){this._clearField(),this._activateGame(),this._toggleStartControl(),this._hideMessages({start:!1,win:!0,lose:!0,hint:!0}),this._dom.size.removeAttribute("disabled"),this._isPlaying=!1,this.score=0,this._maxValue=0}},{key:"moveLeft",value:function(){this._moveCells("left")}},{key:"moveRight",value:function(){this._moveCells("right")}},{key:"moveUp",value:function(){this._moveCells("up")}},{key:"moveDown",value:function(){this._moveCells("down")}},{key:"score",get:function(){return this._score},set:function(e){this._score=e||0,this._dom.score.innerText=this._score}},{key:"maxValue",get:function(){return this._maxValue},set:function(e){this._maxValue>=e||(this._maxValue=e)}},{key:"active",get:function(){return this._isActive},set:function(e){this._dom.game&&(this._isActive=e,this._dom.game.classList.toggle("active",e))}}]),t}();module.exports=c;
},{"./Cell":"Tp2M","party-js":"rnaI"}],"KIzB":[function(require,module,exports) {
"use strict";var e=require("./classes/Game2048"),t=document.querySelector(".page__button-new");t.addEventListener("click",function(){var a=document.createElement("section");a.className="app",t.before(a),new e(a,4).create()});var a=new e(".app",4);a.create();
},{"./classes/Game2048":"vabL"}]},{},["KIzB"], null)
//# sourceMappingURL=main.269801df.js.map